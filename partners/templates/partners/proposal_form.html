{% extends 'base.html' %}

{% block title_head %}Partner Application{% endblock %}
{% block title %}Apply{% endblock %}

{% block mainfull %}

{% if activecall %}
<form action="" method="post">
  {% csrf_token %}

  {% for hidden in form.hidden_fields %}
      {{ hidden }}
  {% endfor %}

{% if form.errors %}
  <div class="has-text-danger">{{ form.non_field_errors.as_ul }}</div>
{% endif %}

<div class="field">
  <label class="label">{{form.title.label|capfirst}}</label>
  <span class="has-text-danger">{{ form.title.errors.as_ul }}</span>
  {{form.title}}
</div>
<div class="field">
  <label class="label">{{form.summary.label|capfirst}}</label>
  <span class="has-text-danger">{{ form.summary.errors.as_ul }}</span>
  {{ form.summary}}
</div>

<div class="block">
  Or select an existing project to extend
</div>

<div class="field">
  <label class="label">{{form.title_options.label|capfirst}}</label>
  <div class="select">
      {{form.title_options}}
  </div>
</div>

  {% for field in form %}
  {% if field.name != 'title' and field.name != 'title_options' and field.name != 'summary'%}
  <div class="field">
    <label class="label">{{field.label|capfirst}}</label>
    <span class="has-text-danger">{{ field.errors.as_ul }}</span>
    <div class="control">
      {% if field.name in exclusions %}
       {% if field.name == 'size' %}
       <div class="control">
        <div class="select">
          {{field}}
          </div>
        </div>
        {% elif field.name == 'institution' %}
        <div class="control has-icons-left has-icons-right">
         <input class="input is-success" type="text" name="{{field.name}}" value="{{field.value}}" />
         <span class="icon is-small is-left">
           <i class="fas fa-building"></i>
         </span>
       </div>
       {% elif field.name == 'time' %}
       <div class="control has-icons-left has-icons-right">
        <input class="input is-success" type="number" name="{{field.name}}" value="{{field.value}}" />
        <span class="icon is-small is-left">
          <i class="fas fa-clock"></i>
        </span>
      </div>
       {% endif %}
      {% else %}
      {{ field }}
      {% endif %}
    </div>
  </div>
  {% endif %}
  {% endfor %}
  <div class="field is-grouped">
    <div class="control">
      <input type="submit" class="button is-link" value="Save" />
    </div>
    <div class="control">
      <a class="button is-link is-light" href="{% url 'partners' %}">Exit</a>
    </div>
  </div>
</form>

{% else %}
<p>There are currently no open calls for new Global Sky Partner proposals.</p>
<p>You may want to consider applying to our <a href="https://lco.global/education/partners/becoming-global-sky-partner/"Pilot Partner program</a>.</p>
{% endif %}
{% endblock %}
